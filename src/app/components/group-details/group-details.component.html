<!-- group-details.component.html -->
<div class="group-details-container">
    <div *ngIf="isLoading" class="loading-state">
      <div class="loader"></div>
      <p>Loading group details...</p>
    </div>
  
    <div *ngIf="error" class="error-message">
      {{ error }}
    </div>
  
    <ng-container *ngIf="currentUser$ | async as currentUser">
      <div *ngIf="group && !isLoading" class="group-content">
        <div class="group-header">
          <div class="group-title-section">
            <h1>{{ group.name }}</h1>
            
            <div class="action-buttons">
              <!-- Admin Actions -->
              <ng-container *ngIf="isGroupAdmin(currentUser)">
                <button class="edit-button" (click)="toggleEdit()">
                  {{ isEditing ? 'Cancel Edit' : 'Edit Group' }}
                </button>
                <button class="delete-button" (click)="deleteGroup()">
                  Delete Group
                </button>
              </ng-container>
  
              <!-- Join Button -->
              <button 
                *ngIf="!isGroupMember(currentUser)"
                (click)="joinGroup(currentUser)"
                [disabled]="isJoining"
                class="join-button"
              >
                {{ isJoining ? 'Joining...' : 'Join Group' }}
              </button>
  
              <!-- Member Badge -->
              <div *ngIf="isGroupMember(currentUser)" class="member-badge" 
                   [class.admin]="isGroupAdmin(currentUser)">
                {{ isGroupAdmin(currentUser) ? 'Admin' : 'Member' }}
              </div>
            </div>
          </div>
        </div>
  
        <!-- Group Info -->
        <div class="group-info">
          <!-- About Section -->
          <section class="content-section">
            <h2>About</h2>
            <p>{{ group.description }}</p>
          </section>
  
          <!-- Current Book Section -->
          <section class="content-section" *ngIf="group.currentBook">
            <h2>Currently Reading</h2>
            <div class="current-book">
              <img 
                *ngIf="group.currentBook.imageUrl"
                [src]="group.currentBook.imageUrl" 
                [alt]="group.currentBook.title"
                class="book-cover"
              >
              <div class="book-info">
                <h3>{{ group.currentBook.title }}</h3>
              </div>
            </div>
          </section>
  
          <!-- Members Section -->
          <section class="content-section">
            <div class="section-header">
              <h2>Members ({{ group.memberCount }})</h2>
              <button class="toggle-button" (click)="toggleMembersList()">
                {{ showMembersList ? 'Hide' : 'Show' }} Members
              </button>
            </div>
  
            <div class="members-list" *ngIf="showMembersList">
              <div *ngFor="let email of group.memberEmails" class="member-item">
                <span class="member-email">{{ email }}</span>
              </div>
            </div>
          </section>
  
          <!-- Meeting Schedule -->
          <section class="content-section" *ngIf="group.meetingDay || group.meetingTime">
            <h2>Meeting Schedule</h2>
            <div class="meeting-details">
              <p *ngIf="group.meetingDay"><strong>Day:</strong> {{ group.meetingDay }}</p>
              <p *ngIf="group.meetingTime"><strong>Time:</strong> {{ group.meetingTime }}</p>
            </div>
          </section>
  
          <!-- Tags -->
          <section class="content-section" *ngIf="group.tags?.length">
            <h2>Tags</h2>
            <div class="tags">
              <span class="tag" *ngFor="let tag of group.tags">{{ tag }}</span>
            </div>
          </section>
        </div>
      </div>
    </ng-container>
  </div>